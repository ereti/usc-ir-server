<!DOCTYPE html>
<html>
	<head>
		<title><%= CONFIG.serverName %> - <%= profile.username %>'s Profile</title>
        <%- include("../partials/head.ejs") %>
        <link href="/css/profile.css" rel="stylesheet" />
	</head>
	<body>
        <script>
            const profile_of = "<%= profile.username %>";
            const my_profile = <%= profile.username == username %>;
        </script>
        <%- include("../partials/navbar.ejs") %>

        <div id="container">
				<div class="row">
					<div class="col-12 align-self-center text-center">
						<h1><%= profile.username %>'s profile</h1>
					</div>
				</div>

                <ul class="nav nav-tabs nav-fill" id="profile-tab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" data-toggle="tab" href="#score-table-tab" role="tab" aria-selected="true" id="scores-tab-button">Scores</a>
                    </li>
					<% if(profile.username == username) { %>
						<li class="nav-item">
	                        <a class="nav-link" data-toggle="tab" href="#settings-tab" role="tab" aria-selected="false" id="settings-tab-button">Settings</a>
	                    </li>
					<% } %>
                </ul>

                <div class="tab-content" id="tab-container">
                    <div class="tab-pane fade show active" id="score-table-tab" role="tabpanel">
                        <table class="table sortable" id="score-table">
                            <thead>
                                <th scope="col" class="sorttable_alpha">Chart</th>
								<th scope="col" class="sorttable_numeric">Difficulty</th>
								<th scope="col" class="sorttable_numeric">Score</th>
								<th scope="col" class="sorttable_numeric">Grade</th>
	                            <th scope="col" class="sorttable_numeric">Lamp</th>
	                            <th scope="col" class="sorttable_numeric">Crit</th>
	                            <th scope="col" class="sorttable_numeric">Near</th>
	                            <th scope="col" class="sorttable_numeric">Error</th>
                            </thead>
                            <tbody id="score-body">

                            </tbody>
                        </table>
                    </div>
					<% if(profile.username == username) { %>
						<div class="tab-pane fade" id="settings-tab" role="tabpanel">
	                        <div class="row justify-content-center" style="padding: 10px;">
	                            <div class="col-12 text-center">
	                                <button type="button" class="btn btn-highlight" data-toggle="modal" data-target="#view-token-modal">Manage IR token</button>
	                            </div>
	                        </div>
	                    </div>
					<% } %>
                </div>

        </div>

		<div class="modal fade" id="view-token-modal" tabindex="-1" role="dialog" aria-hidden="true">
			<div class="modal-dialog" role="document">
			    <div class="modal-content">
			    	<div class="modal-header">
		        		<h5 class="modal-title">Manage IR token</h5>
		        		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
		          			<span aria-hidden="true">&times;</span>
		        		</button>
		      		</div>
					<div class="modal-body">
						<form>
          					<div class="form-group">
            					<label class="col-form-label" style="color: red;">Note: your token is sensitive and should not be shown to anyone else.</label>
            					<input type="text" class="form-control" id="token" readonly="">
          					</div>
        				</form>
		      		</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-highlight mr-auto" onclick="load_token()">Show my token</button>
						<button type="button" class="btn btn-highlight" onclick="reset_token()">Reset my token</button>
					</div>
		    	</div>
		  	</div>
		</div>

		<script src="/js/profile.js"></script>
    </body>
</html>
